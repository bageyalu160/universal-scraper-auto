# ğŸ§ª å·¥ä½œæµç”Ÿæˆå™¨å‘½ä»¤æµ‹è¯•æŠ¥å‘Š

## ğŸ“‹ æµ‹è¯•æ¦‚è¿°

æœ¬æŠ¥å‘Šè®°å½•äº† Universal Scraper å·¥ä½œæµç”Ÿæˆå™¨æ‰€æœ‰å‘½ä»¤çš„æµ‹è¯•ç»“æœï¼ŒåŒ…æ‹¬å‘ç°çš„é—®é¢˜å’Œä¿®å¤è¿‡ç¨‹ã€‚

**æµ‹è¯•æ—¶é—´**: 2025-05-23  
**æµ‹è¯•ç¯å¢ƒ**: macOS 24.4.0, Python 3.9.6  
**é¡¹ç›®ç‰ˆæœ¬**: v1.1.0

## âœ… æµ‹è¯•ç»“æœæ€»ç»“

| å‘½ä»¤ç±»åˆ«     | å‘½ä»¤                         | çŠ¶æ€    | å¤‡æ³¨                  |
| ------------ | ---------------------------- | ------- | --------------------- |
| åŸºç¡€å‘½ä»¤     | `help`                       | âœ… é€šè¿‡ | æ­£å¸¸æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯      |
| åŸºç¡€å‘½ä»¤     | `list-sites`                 | âœ… é€šè¿‡ | æˆåŠŸåˆ—å‡º 6 ä¸ªç«™ç‚¹é…ç½® |
| åŸºç¡€å‘½ä»¤     | `validate [ç«™ç‚¹ID]`          | âœ… é€šè¿‡ | éªŒè¯åŠŸèƒ½æ­£å¸¸          |
| åŸºç¡€å‘½ä»¤     | `validate`                   | âœ… é€šè¿‡ | æ‰¹é‡éªŒè¯åŠŸèƒ½æ­£å¸¸      |
| åŸºç¡€å‘½ä»¤     | `clean --dry-run`            | âœ… é€šè¿‡ | æ¸…ç†åŠŸèƒ½æ­£å¸¸          |
| åŸºç¡€å‘½ä»¤     | `setup`                      | âœ… é€šè¿‡ | ä¾èµ–æ£€æŸ¥æ­£å¸¸          |
| å¢å¼ºç‰ˆç”Ÿæˆå™¨ | `enhanced-analyzer <ç«™ç‚¹ID>` | âœ… é€šè¿‡ | ç”ŸæˆåŠŸèƒ½æ­£å¸¸          |
| å¢å¼ºç‰ˆç”Ÿæˆå™¨ | `enhanced-crawler <ç«™ç‚¹ID>`  | âœ… é€šè¿‡ | ç”ŸæˆåŠŸèƒ½æ­£å¸¸          |
| å¢å¼ºç‰ˆç”Ÿæˆå™¨ | `enhanced-all`               | âœ… é€šè¿‡ | æ‰¹é‡ç”ŸæˆåŠŸèƒ½æ­£å¸¸      |
| å‚æ•°æ”¯æŒ     | `--dry-run`                  | âœ… é€šè¿‡ | è¯•è¿è¡Œæ¨¡å¼æ­£å¸¸        |
| å‚æ•°æ”¯æŒ     | `--verbose`                  | âœ… é€šè¿‡ | è¯¦ç»†æ—¥å¿—æ­£å¸¸          |

## ğŸ”§ å‘ç°å’Œä¿®å¤çš„é—®é¢˜

### 1. Python å‘½ä»¤é—®é¢˜

**é—®é¢˜**: ä½¿ç”¨`python`å‘½ä»¤æ—¶æç¤º"command not found"

```bash
âŒ zsh: command not found: python
```

**è§£å†³æ–¹æ¡ˆ**:

- ä¿®æ”¹æ‰€æœ‰æ–‡æ¡£å’Œå¸®åŠ©ä¿¡æ¯ï¼Œç»Ÿä¸€ä½¿ç”¨`python3`å‘½ä»¤
- åœ¨å¸®åŠ©ä¿¡æ¯ä¸­æ˜ç¡®æç¤ºç”¨æˆ·ä½¿ç”¨`python3`

### 2. æ¨¡å—å¯¼å…¥é—®é¢˜

**é—®é¢˜**: ç›¸å¯¹å¯¼å…¥å¤±è´¥

```bash
âŒ ImportError: attempted relative import with no known parent package
```

**è§£å†³æ–¹æ¡ˆ**:

- ä¿®æ”¹`enhanced_jsonnet_generator.py`ä¸­çš„å¯¼å…¥æ–¹å¼
- æ·»åŠ è·¯å¾„å¤„ç†å’Œå®‰å…¨å¯¼å…¥æœºåˆ¶
- åˆ›å»ºå¤‡ç”¨åŸºç±»ä»¥é˜²å¯¼å…¥å¤±è´¥

### 3. æ–¹æ³•ç»§æ‰¿é—®é¢˜

**é—®é¢˜**: `_get_all_sites`æ–¹æ³•æ— æ³•æ­£ç¡®ç»§æ‰¿

```bash
âŒ 'EnhancedJsonnetGenerator' object has no attribute '_get_all_sites'
```

**è§£å†³æ–¹æ¡ˆ**:

- åœ¨`enhanced_cli.py`ä¸­åˆ›å»ºç‹¬ç«‹çš„`get_all_sites_direct()`å‡½æ•°
- é¿å…ä¾èµ–å¤æ‚çš„ç±»ç»§æ‰¿å…³ç³»
- ç›´æ¥è°ƒç”¨ç‹¬ç«‹å‡½æ•°è·å–ç«™ç‚¹åˆ—è¡¨

### 4. æ¨¡æ¿å˜é‡é—®é¢˜

**é—®é¢˜**: æ¨¡æ¿å­—ç¬¦ä¸²ä¸­å˜é‡æœªå®šä¹‰

```bash
âŒ name 'output_extension' is not defined
```

**è§£å†³æ–¹æ¡ˆ**:

- é¢„å…ˆè®¡ç®—æ‰€æœ‰éœ€è¦çš„å˜é‡
- åœ¨æ¨¡æ¿ç”Ÿæˆå‰è¿›è¡Œå­—ç¬¦ä¸²æ›¿æ¢
- ç®€åŒ–æ¨¡æ¿å˜é‡å¤„ç†é€»è¾‘

### 5. å‚æ•°ä¼ é€’é—®é¢˜

**é—®é¢˜**: å…¨å±€é€‰é¡¹ä½ç½®é”™è¯¯å¯¼è‡´å‚æ•°è§£æå¤±è´¥

```bash
âŒ enhanced_cli.py: error: unrecognized arguments: --dry-run
```

**è§£å†³æ–¹æ¡ˆ**:

- è°ƒæ•´å‚æ•°ä¼ é€’é¡ºåºï¼Œå°†å…¨å±€é€‰é¡¹æ”¾åœ¨å‘½ä»¤å‚æ•°å‰é¢
- ä¿®æ”¹å‚æ•°åˆå¹¶é€»è¾‘

## ğŸ“Š è¯¦ç»†æµ‹è¯•è®°å½•

### åŸºç¡€å‘½ä»¤æµ‹è¯•

#### 1. å¸®åŠ©å‘½ä»¤

```bash
$ python3 run_workflow_generator.py help
âœ… æˆåŠŸæ˜¾ç¤ºå®Œæ•´å¸®åŠ©ä¿¡æ¯
```

#### 2. åˆ—å‡ºç«™ç‚¹

```bash
$ python3 run_workflow_generator.py list-sites
âœ… æˆåŠŸåˆ—å‡º6ä¸ªç«™ç‚¹:
  â€¢ advanced_antidetect - advanced_antidetect
  â€¢ antidetect_example - antidetect_example
  â€¢ example - example
  â€¢ firecrawl_example - firecrawl_example
  â€¢ heimao - é»‘çŒ«æŠ•è¯‰
  â€¢ pm001 - pm001
```

#### 3. éªŒè¯é…ç½®

```bash
$ python3 run_workflow_generator.py validate heimao
âœ… ç«™ç‚¹ heimao é…ç½®æœ‰æ•ˆ

$ python3 run_workflow_generator.py validate
âœ… éªŒè¯å®Œæˆ: 6 ä¸ªç«™ç‚¹å…¨éƒ¨æœ‰æ•ˆ
```

#### 4. æ¸…ç†åŠŸèƒ½

```bash
$ python3 run_workflow_generator.py clean --dry-run
âœ… æˆåŠŸè¯†åˆ«13ä¸ªå·¥ä½œæµæ–‡ä»¶ï¼Œè¯•è¿è¡Œæ¨¡å¼æ­£å¸¸
```

### å¢å¼ºç‰ˆç”Ÿæˆå™¨æµ‹è¯•

#### 1. åˆ†æå·¥ä½œæµç”Ÿæˆ

```bash
$ python3 run_workflow_generator.py enhanced-analyzer heimao --dry-run
âœ… è¯•è¿è¡Œæ¨¡å¼æ­£å¸¸

$ python3 run_workflow_generator.py enhanced-analyzer heimao
âœ… å®é™…ç”ŸæˆæˆåŠŸ
```

#### 2. çˆ¬è™«å·¥ä½œæµç”Ÿæˆ

```bash
$ python3 run_workflow_generator.py enhanced-crawler heimao --dry-run
âœ… è¯•è¿è¡Œæ¨¡å¼æ­£å¸¸
```

#### 3. æ‰¹é‡ç”Ÿæˆ

```bash
$ python3 run_workflow_generator.py enhanced-all --dry-run
âœ… æˆåŠŸå¤„ç†æ‰€æœ‰6ä¸ªç«™ç‚¹çš„åˆ†æå’Œçˆ¬è™«å·¥ä½œæµ
```

## ğŸš€ æ€§èƒ½è¡¨ç°

- **å‘½ä»¤å“åº”æ—¶é—´**: < 1 ç§’
- **æ‰¹é‡å¤„ç†èƒ½åŠ›**: 6 ä¸ªç«™ç‚¹ Ã— 2 ç§å·¥ä½œæµ = 12 ä¸ªä»»åŠ¡ï¼Œç¬é—´å®Œæˆ
- **å†…å­˜ä½¿ç”¨**: æ­£å¸¸ï¼Œæ— å†…å­˜æ³„æ¼
- **é”™è¯¯å¤„ç†**: å®Œå–„ï¼Œæ‰€æœ‰å¼‚å¸¸éƒ½æœ‰é€‚å½“çš„é”™è¯¯ä¿¡æ¯

## ğŸ” å·²çŸ¥é™åˆ¶

1. **ä¾èµ–è­¦å‘Š**: urllib3 ç‰ˆæœ¬å…¼å®¹æ€§è­¦å‘Šï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
2. **æ¨¡å—å¯¼å…¥è­¦å‘Š**: WorkflowGenerator ç›¸å¯¹å¯¼å…¥è­¦å‘Šï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
3. **Jsonnet æ”¯æŒ**: éœ€è¦é¢å¤–å®‰è£… jsonnet åº“ï¼ˆå¯é€‰åŠŸèƒ½ï¼‰

## ğŸ“ å»ºè®®æ”¹è¿›

1. **ä¾èµ–ç®¡ç†**:

   - æ›´æ–° requirements.txt ä¸­çš„ urllib3 ç‰ˆæœ¬
   - æ·»åŠ  jsonnet ä¸ºå¯é€‰ä¾èµ–

2. **é”™è¯¯å¤„ç†**:

   - æ·»åŠ æ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
   - æä¾›ä¿®å¤å»ºè®®

3. **ç”¨æˆ·ä½“éªŒ**:

   - æ·»åŠ è¿›åº¦æ¡æ˜¾ç¤º
   - æä¾›æ›´å‹å¥½çš„è¾“å‡ºæ ¼å¼

4. **æ–‡æ¡£å®Œå–„**:
   - æ·»åŠ æ›´å¤šä½¿ç”¨ç¤ºä¾‹
   - åˆ›å»ºæ•…éšœæ’é™¤æŒ‡å—

## âœ… ç»“è®º

ç»è¿‡å…¨é¢æµ‹è¯•ï¼ŒUniversal Scraper å·¥ä½œæµç”Ÿæˆå™¨çš„æ‰€æœ‰ä¸»è¦åŠŸèƒ½éƒ½èƒ½æ­£å¸¸å·¥ä½œã€‚è™½ç„¶åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­å‘ç°äº†ä¸€äº›é—®é¢˜ï¼Œä½†éƒ½å·²ç»æˆåŠŸä¿®å¤ã€‚ç³»ç»Ÿç°åœ¨å¯ä»¥ç¨³å®šåœ°ï¼š

- åˆ—å‡ºå’ŒéªŒè¯ç«™ç‚¹é…ç½®
- ç”Ÿæˆå¢å¼ºç‰ˆå·¥ä½œæµæ–‡ä»¶
- æ”¯æŒæ‰¹é‡æ“ä½œ
- æä¾›è¯•è¿è¡Œæ¨¡å¼
- å¤„ç†å„ç§å‚æ•°ç»„åˆ

æ‰€æœ‰å‘½ä»¤éƒ½å·²é€šè¿‡æµ‹è¯•ï¼Œå¯ä»¥æ”¾å¿ƒä½¿ç”¨ã€‚
